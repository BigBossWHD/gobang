# 五子棋网页游戏

## 项目简介
这是一个使用原生 HTML、CSS 和 JavaScript 实现的 15x15 五子棋网页游戏，支持双人对战与人机对战两种模式。界面采用自适应布局，桌面与移动端均能流畅运行，无需任何构建流程即可直接部署或访问。最新版本还引入可配置的大模型难度，可通过自定义 API 接口为 AI 注入更强的推演能力。

## 功能亮点
- 双人 (PVP) 与人机 (PVE) 对战模式，可随时切换
- 提供简单 / 中等 / 困难 / 大模型 四档 AI 难度，支持玩家先手或后手
- 棋盘落子动画、最近一步高亮、对局状态提示与结果弹窗
- 内置悔棋功能与一键重开，方便快速试探或复盘
- 大模型难度支持自定义端点、API 密钥与模型名称，并附带一键连通性测试
- 完全前端实现，可直接托管在任意静态网站或本地运行

## 快速开始
```bash
# 方案一：直接打开静态文件（macOS / Linux 示例）
open index.html

# 方案二：启用本地开发服务器（推荐）
python3 -m http.server 8000
# 浏览器访问 http://localhost:8000
```
如需在 Windows 打开静态页面，可直接双击 `index.html` 或使用 `start index.html`。

## 操作说明
- 左侧“对局设置”面板：
  - `游戏模式` 在双人对战与人机对战之间切换
  - `难度` 控制 AI 启发式强度（仅 PVE 时显示）
  - `执棋顺序` 切换玩家先手或后手（仅 PVE 时显示）
- 中央棋盘区域：点击空白交叉点即可落子，系统会在 AI 回合自动行动
- 右侧“对局控制”面板：
  - `新游戏` 重置棋盘与对局状态
  - `悔棋` 撤销最近一步（PVE 模式下会自动恢复到玩家执棋）
  - 状态栏实时提示当前执棋方或游戏结果
- 对局结束时将出现结果弹窗，可选择继续观棋或立即再来一局

## AI 难度说明
- `简单`：基于邻近候选点的启发式，兼顾随机性，适合入门
- `中等`：对每个落点计算攻防分数，优先形成连续棋形并阻断对手
- `困难`：在中等基础上追加威胁评估、重心偏好与多半径扫描，更具挑战
- `大模型`：通过自定义 LLM 接口评估棋盘威胁、候选落子与攻守理由。系统会向模型提供：
  - 当前棋盘 ASCII 表示与最近落子列表
  - 双方活四 / 冲四 / 活三 / 眠三等威胁摘要
  - 预先筛选的合法落子候选列表（模型必须从中选择）
  - 约定的输出 JSON 格式（含 `move` / `analysis` / `banter` 字段）
 选择该难度时需填写端点、API 密钥与模型名称，并可点击“测试连通性”验证配置是否可用。

> **提示**：`analysis` 字段要求给出攻守双向理由（格式示例 `攻:左翼活三成型; 守:封锁右上夹击`），`banter` 字段则用于输出一句幽默短评，方便识别为大模型落子。

### 推理模型兼容性
- 发生格式错误时，客户端会尝试回退解析 reasoning / analysis 文本中的坐标，只要推理内容能明确指向候选列表中的某一点，即视为“允许从推理内容识别落子”。
- 建议在 JSON 中同步填充 `move` 字段，并在推理文本中重复坐标或棋盘方位（如 `move: (x=7, y=6)`），以降低解析失误概率。
- `允许从推理内容识别落子` 仅在启用“推理回落”选项 (`useReasoningFallback`) 时生效，若担心模型产生幻觉，可在设置面板关闭该选项。

## 项目结构
```
index.html   # 页面结构与 UI 布局
style.css    # 自适应界面与棋盘样式
script.js    # GomokuGame 类及所有游戏逻辑
```
项目中未引入构建工具，所有资源均可直接在浏览器端运行。

## 开发与维护建议
- 新增 UI 元素时，请保持在 `.container` 布局内部，避免破坏响应式结构
- 统一使用 4 空格缩进，JavaScript 标识符采用 lowerCamelCase，CSS 类名使用 kebab-case
- 更新 AI 策略或 LLM 提示词时，可先以 `console.debug` 输出候选落点 / 模型请求载荷进行调试，提交前记得移除
- 手动测试时至少覆盖：PVP 僵持与胜利、PVE 四档难度（玩家先后手）、悔棋与重开、移动端视口
- 大模型模式下建议额外验证：连通性测试按钮、首次思考提示、模型是否严格使用候选列表以及攻守分析是否合理

## 部署提示
将项目文件上传到任意静态网站托管（如 GitHub Pages、Vercel、Netlify 等）即可上线；无需服务器端依赖或打包流程。
